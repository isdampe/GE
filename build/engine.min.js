function gameEngine(a){this.config=a;var b=this,c=a.canvas.getContext("2d"),d=new Array;this.objectAdd=function(a){var b=d.length;return d[b]=a,d[b].objectId=b,d[b]},this.objectDestroy=function(a){for(d[a].tickId&&clearInterval(d[a].tickId),d.splice(a,1),i=0;i<d.length;i++)d[i].objectId=i},this.objectLoop=function(a){for(i=0;i<d.length;i++)a(d[i])},this.objectCollision=function(a,c){var e=d[a].x,f=d[a].y,g=a;b.objectLoop(function(b){if(b.objectId!=g&&e>=b.x&&e<b.x+b.width&&f>=b.y&&f<b.y+b.height)switch(c){case"self":d[a].oncollision(d[a]);break;case"other":b.oncollision(d[a]);break;case"both":d[a].oncollision(d[a]),b.oncollision(d[a])}})},this.begin=function(){!function a(){requestAnimFrame(a),b.gfxRender()}()},this.gfxRender=function(){c.clearRect(0,0,b.config.width,b.config.height),b.objectLoop(function(a){"function"==typeof a.render&&a.render(c,a)})}}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();